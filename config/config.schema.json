{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"type": "object",
	"properties": {
		"environment": {
			"type": "string",
			"enum": ["dev", "prod", "test"],
			"description": "Application environment"
		},
		"app_name": {
			"type": "string",
			"description": "Name of the application"
		},
		"network": {
			"description": "Network configuration",
			"type": "object",
			"properties": {
				"host": {
					"type": "string",
					"description": "Server host"
				},
				"port": {
					"type": "integer",
					"minimum": 1,
					"maximum": 65535,
					"description": "Server port"
				},
				"protocol": {
					"type": "string",
					"enum": ["http", "https"],
					"description": "Protocol to use"
				}
			},
			"required": ["host", "port", "protocol"],
			"additionalProperties": false
		},
		"database": {
			"description": "Database configuration",
			"type": "object",
			"properties": {
				"port": {
					"type": "integer",
					"minimum": 1,
					"maximum": 65535,
					"description": "Database port"
				},
				"host": {
					"type": "string",
					"description": "Database host"
				},
				"user": {
					"type": "string",
					"description": "Database username"
				},
				"pass": {
					"type": "string",
					"description": "Database password"
				},
				"name": {
					"type": "string",
					"description": "Database name"
				}
			},
			"required": ["port", "host", "user", "pass", "name"],
			"additionalProperties": false
		},
		"sessions": {
			"description": "Session management configuration",
			"type": "object",
			"properties": {
				"auto_sign_in": {
					"type": "string",
					"description": "Username for automatic sign-in (dev only)"
				},
				"duration": {
					"type": "integer",
					"minimum": 0,
					"description": "Session duration in milliseconds"
				},
				"password_request_lifetime": {
					"type": "integer",
					"minimum": 0,
					"description": "Password reset request lifetime in milliseconds"
				},
				"fingerprint_secret": {
					"type": "string",
					"minLength": 1,
					"description": "Secret for fingerprinting sessions"
				}
			},
			"required": ["duration", "password_request_lifetime", "fingerprint_secret"],
			"additionalProperties": false
		},
		"redis": {
			"description": "Redis configuration",
			"type": "object",
			"properties": {
				"url": {
					"type": "string",
					"format": "uri",
					"description": "Redis connection URL"
				},
				"name": {
					"type": "string",
					"description": "Redis instance name"
				}
			},
			"required": ["url", "name"],
			"additionalProperties": false
		},
		"logs": {
			"description": "Logging configuration",
			"type": "object",
			"properties": {
				"enabled": {
					"type": "boolean",
					"description": "Whether logging is enabled"
				},
				"outdir": {
					"type": "string",
					"description": "Directory for log files"
				},
				"level": {
					"description": "Log levels (to be handled separately)",
					"type": "array",
					"items": {
						"enum": ["trace", "debug", "info", "warn", "error", "fatal", "silent", "struct"]
					}
				}
			},
			"required": ["outdir", "level"],
			"additionalProperties": false
		},
		"admin": {
			"description": "Initial admin user configuration",
			"type": "object",
			"properties": {
				"user": {
					"type": "string",
					"minLength": 1,
					"description": "Admin username"
				},
				"pass": {
					"type": "string",
					"minLength": 1,
					"description": "Admin password"
				},
				"email": {
					"type": "string",
					"format": "email",
					"description": "Admin email address"
				},
				"first_name": {
					"type": "string",
					"description": "Admin first name"
				},
				"last_name": {
					"type": "string",
					"description": "Admin last name"
				}
			},
			"required": ["user", "pass", "email", "first_name", "last_name"],
			"additionalProperties": false
		},
		"email": {
			"description": "Email service configuration",
			"type": "object",
			"properties": {
				"queue_name": {
					"type": "string",
					"description": "Name of the email queue"
				},
				"max_size": {
					"type": "integer",
					"minimum": 1,
					"description": "Maximum queue size"
				},
				"support_email": {
					"type": "string",
					"format": "email",
					"description": "Support email address"
				}
			},
			"required": ["queue_name", "max_size", "support_email"],
			"additionalProperties": false
		},
		"ntp": {
			"description": "NTP server configuration",
			"type": "object",
			"properties": {
				"server": {
					"type": "string",
					"description": "NTP server name or address"
				}
			},
			"required": ["server"],
			"additionalProperties": false
		},
		"limiting": {
			"description": "Rate limiting configuration",
			"type": "object",
			"properties": {
				"enabled": {
					"type": "boolean",
					"description": "Whether rate limiting is enabled"
				},
				"requests": {
					"type": "integer",
					"minimum": 1,
					"description": "Number of requests allowed"
				},
				"window": {
					"type": "integer",
					"minimum": 1,
					"description": "Time window in seconds"
				}
			},
			"required": ["enabled", "requests", "window"],
			"additionalProperties": false
		},
		"cache": {
			"description": "Cache configuration",
			"type": "object",
			"properties": {
				"enabled": {
					"type": "boolean",
					"description": "Whether caching is enabled"
				},
				"debug": {
					"type": "boolean",
					"description": "Whether to enable cache debugging logs"
				},
				"version": {
					"type": "integer",
					"description": "Cache version identifier"
				},
				"static": {
					"type": "object",
					"description": "Static cache settings",
					"properties": {
						"enabled": {
							"type": "boolean",
							"description": "Whether static caching is enabled"
						},
						"duration": {
							"type": "integer",
							"minimum": 0,
							"description": "Static cache duration in milliseconds"
						},
						"limit": {
							"type": "integer",
							"minimum": 1,
							"description": "Maximum number of static cache entries"
						},
						"assets": {
							"type": "array",
							"description": "List of static asset paths to cache",
							"items": {
								"type": "string"
							}
						}
					},
					"required": [
						"enabled",
						"duration",
						"limit",
						"assets"
					]
				},
				"api": {
					"type": "object",
					"description": "Static cache settings",
					"properties": {
						"enabled": {
							"type": "boolean",
							"description": "Whether static caching is enabled"
						},
						"duration": {
							"type": "integer",
							"minimum": 0,
							"description": "Static cache duration in milliseconds"
						},
						"limit": {
							"type": "integer",
							"minimum": 1,
							"description": "Maximum number of static cache entries"
						},
						"assets": {
							"type": "array",
							"description": "List of static asset paths to cache",
							"items": {
								"type": "string"
							}
						}
					},
					"required": [
						"enabled",
						"duration",
						"limit",
						"assets"
					]
				},
				"pages": {
					"type": "object",
					"description": "Static cache settings",
					"properties": {
						"enabled": {
							"type": "boolean",
							"description": "Whether static caching is enabled"
						},
						"duration": {
							"type": "integer",
							"minimum": 0,
							"description": "Static cache duration in milliseconds"
						},
						"limit": {
							"type": "integer",
							"minimum": 1,
							"description": "Maximum number of static cache entries"
						},
						"assets": {
							"type": "array",
							"description": "List of static asset paths to cache",
							"items": {
								"type": "string"
							}
						}
					},
					"required": [
						"enabled",
						"duration",
						"limit",
						"assets"
					]
				}
			},
			"required": [
				"enabled",
				"static",
				"api",
				"pages",
				"version",
				"debug"
			],
			"additionalProperties": false
		}
	},
	"required": [
		"environment",
		"app_name",
		"network",
		"database",
		"sessions",
		"redis",
		"logs",
		"admin",
		"email",
		"ntp",
		"limiting",
		"cache"
	],
	"additionalProperties": false
}
